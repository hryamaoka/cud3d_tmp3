# `src/main.c` 詳細解説

## 概要
プログラムのエントリーポイントです。コマンドライン引数の確認、ゲーム構造体の初期化、マップファイルのパース、ウィンドウとテクスチャの初期化、そしてメインループの開始という一連の流れを制御します。

## コード詳細解説

| 行番号 | コード | 解説 |
| :--- | :--- | :--- |
| **15** | `int main(int argc, char *argv[])` | **メイン関数**<br>プログラムの開始地点。引数としてマップファイルのパスを受け取ります。 |
| **18-19** | `  if (argc != 2)` | **引数チェック**<br>引数が2つ（プログラム名 + マップファイルパス）であることを確認し、不正な場合は使用法を表示して終了します。 |
| **20-21** | `  if (!check_filename(argv[1]))` | **拡張子チェック**<br>ファイル名が`.cub`で終わっているかを確認します。 |
| **22** | `  init_game(&game);` | **構造体初期化**<br>`t_game`構造体をゼロクリアし、ポインタや変数を安全な初期値に設定します。 |
| **23** | `  parse(argv[1], &game);` | **パース処理**<br>マップファイルを読み込み、設定（解像度、テクスチャ、マップデータ）を構造体に格納します。エラーがあれば内部で終了します。 |
| **24-25** | `  if (!init_window(&game))` | **ウィンドウ初期化**<br>MiniLibXの初期化、ウィンドウ作成、画像バッファの確保を行います。失敗時はエラー終了。 |
| **26-27** | `  if (!init_textures(&game))` | **テクスチャロード**<br>設定されたパスから画像を読み込み、MLX画像オブジェクトを作成します。 |
| **28** | `  init_sprites(&game);` | **スプライト初期化**<br>マップ上のスプライト（'2'）の位置をスキャンしてリスト化します。 |
| **29** | `  mlx_loop(game.mlx);` | **メインループ開始**<br>イベント待機状態に入り、ウィンドウが閉じられるまでプログラムを実行し続けます。 |
