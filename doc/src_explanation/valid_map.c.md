# `src/parser/valid_map.c` 詳細解説

## 概要
マップの壁が閉じているか、無効な文字が含まれていないかといった、マップ構造の妥当性を検証します。

## コード詳細解説

| 行番号 | コード | 解説 |
| :--- | :--- | :--- |
| **15** | `static int is_valid_char(char c)` | **文字許可リスト**<br>`0, 1, 2, D, N, S, W, E, Space` のみ許可します。 |
| **25** | `int check_map_chars(t_game *game)` | マップ上の全文字を検査します。 |
| **48** | `static int check_surroundings(...)` | **周辺チェック（Flood Fill的要素）**<br>移動可能マス（0,2,D,プレイヤー）の上下左右をチェックします。 |
| **51** | `    if (x == 0 ...)` | マップ端（最外周）に移動可能マスがある場合、「壁で囲まれていない」ためエラー。 |
| **54** | `    if (... == ' ' ...)` | **穴チェック**<br>移動可能マスの隣に「空白（虚空）」がある場合、マップに穴が開いているためエラー。 |
| **61** | `int check_map_closed(t_game *game)` | マップの全セルに対して`check_surroundings`を適用し、閉鎖性を検証します。 |
