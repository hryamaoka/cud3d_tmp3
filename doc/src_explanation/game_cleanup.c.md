# `src/core/game_cleanup.c` 詳細解説

## 概要
ゲーム終了時に確保された全てのリソース（メモリ、画像、ウィンドウ、ディスプレイ接続）を適切に解放・破棄するクリーンアップ機能を提供します。

## コード詳細解説

| 行番号 | コード | 解説 |
| :--- | :--- | :--- |
| **15** | `void free_split(char **split)` | **文字列配列解放**<br>`ft_split`等で確保された文字列の配列（ダブルポインタ）を解放します。各行の文字列を解放した後、配列自体を解放します。 |
| **26** | `void free_all(t_game *game)` | **全リソース解放**<br>`t_game`構造体に関連付けられた全ての動的割り当てリソースを解放します。 |
| **27-34** | `  if (game->tex.no) ...` | **テクスチャパス解放**<br>パース時に複製されたファイルパス文字列を解放します。 |
| **36** | `    free_split(game->map.grid);` | **マップデータ解放**<br>読み込んだマップの二次元配列を解放します。 |
| **38/40** | `    free(game->z_buffer); ...` | **バッファ解放**<br>Zバッファとスプライト配列を解放します。 |
| **41** | `  if (game->mlx)` | **MLXリソース解放**<br>MiniLibX関連のリソース破棄は、MLXポインタが存在する場合のみ行います。 |
| **45** | `      mlx_destroy_image(...)` | **画像破棄**<br>壁テクスチャ画像を破棄します。 |
| **48-56** | `    if (game->door_tex.img) ...` | ドア、スプライト、画面バッファ用画像をそれぞれ破棄します。 |
| **58** | `      mlx_destroy_window(...)` | **ウィンドウ破棄**<br>作成されたウィンドウを閉じ、リソースを破棄します。 |
| **60** | `    mlx_destroy_display(game->mlx);` | **ディスプレイ切断**<br>Xサーバーとの接続を切断します（Linux環境で特に重要）。 |
| **61** | `    free(game->mlx);` | **MLXポインタ解放**<br>`mlx_init`で確保された構造体自体を解放します。 |
