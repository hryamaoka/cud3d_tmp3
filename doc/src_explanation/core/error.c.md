# `src/core/error.c` 詳細解説

## 概要
エラー発生時の処理を一元管理するファイルです。エラーメッセージを標準エラー出力に表示し、確保されたメモリやリソースを適切に解放してからプログラムを強制終了させる責務を持ちます。

## 依存関係
*   `cub3d.h`: `t_game` 構造体、`free_all` 関数のプロトタイプ。
*   `libft.h`: `ft_putendl_fd` 関数。

## 関数詳細: perror_and_exit

### プロトタイプ
`void perror_and_exit(char *msg, t_game *game)`

### 戻り値
なし（`exit(1)` によりプロセスが終了するため戻りません）。

### コード行別解説

| 行番号 | コード | 詳細解説 |
| :--- | :--- | :--- |
| 15 | `void perror_and_exit(char *msg, t_game *game)` | **エラー終了関数**<br>`msg`: 表示するエラーメッセージ文字列。<br>`game`: 解放すべきリソースを持つ構造体へのポインタ（NULLの場合もありうる）。 |
| 16 | `ft_putendl_fd("Error", STDERR_FILENO);` | **規定のエラーヘッダ出力**<br>課題要件に従い、まず "Error" と出力します。`STDERR_FILENO` (ファイル記述子 2) を使用して標準エラー出力に出します。 |
| 17 | `ft_putendl_fd(msg, STDERR_FILENO);` | **詳細メッセージ出力**<br>引数で受け取った具体的なエラー内容を表示します。 |
| 18 | `if (game != NULL)` | **リソース解放判定**<br>`game` ポインタが有効であれば、メモリ解放処理を行います。初期化前などで `NULL` が渡された場合はスキップします。 |
| 19 | `  free_all(game);` | **全リソース解放**<br>確保済みのマップ、テクスチャ、MLXリソースなどを全て解放します（`src/core/game_cleanup.c`）。これによりメモリリークを防ぎます。 |
| 20 | `exit(1);` | **異常終了**<br>終了ステータス `1` でプログラムを直ちに終了します。 |
