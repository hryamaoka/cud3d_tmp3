# `src/render/sprite.c` 詳細解説

## 概要
スプライト（アイテムや敵など）の描画管理を行います。初期化時の位置特定、プレイヤーからの距離に基づくソート、そして投影変換を経て描画関数を呼び出します。

## コード詳細解説

| 行番号 | コード | 解説 |
| :--- | :--- | :--- |
| **15** | `void init_sprites(t_game *game)` | **初期化**<br>マップを走査してスプライト('2')の個数をカウントし、座標配列(`sprites`)を作成します。スプライト位置はメモリに保存し、マップ上では'0'（床）に置き換えて通り抜け可能にします。 |
| **54** | `static void render_sprite(...)` | **単体スプライト描画**<br>計算された開始Xから終了Xまで、垂直なストライプ（短冊）としてスプライトを描画します。 |
| **66** | `void draw_sprites(t_game *game)` | **スプライト描画統括**<br>全スプライトを処理します。 |
| **80-83** | `    dist[i] = ...` | **距離計算**<br>各スプライトまでの距離（の二乗）を計算します。平方根演算を避けて高速化しています。 |
| **86** | `  sort_sprites(order, dist, ...);` | **ソート**<br>遠いスプライトから順に描画するためにソートします（画家のアルゴリズム）。これにより正しい重なり順で表示されます。 |
