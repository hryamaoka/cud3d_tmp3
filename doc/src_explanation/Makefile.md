# `Makefile` 詳細解説

## 概要
プロジェクトのビルドプロセスを自動化するための設定ファイルです。`cub3D`実行ファイルの生成、ライブラリ(`libft`, `minilibx`)のコンパイル、クリーンアップ処理を定義しています。LinuxとmacOSの両方の環境に対応するための分岐処理も含まれています。

## コード詳細解説

| 行番号 | コード | 解説 |
| :--- | :--- | :--- |
| **13-16** | `NAME = cub3D` | **変数定義**<br>プロジェクト名、コンパイラ(`cc`)、コンパイルフラグ(`-Wextra -Wall -Werror -g`)、削除コマンドを定義します。デバッグ情報(`-g`)が含まれています。 |
| **18-20** | `SRC_DIR = ./src` ... | **ディレクトリ定義**<br>ソースコード、ヘッダー、ライブラリディレクトリのパスを変数化しています。 |
| **22-31** | `SRC = src/main.c ...` | **ソースファイル一覧**<br>コンパイル対象となる全ての`.c`ファイルを明示的にリストアップしています。`main.c`に加え、コア機能、パース処理、入力処理、エンジン、レンダリング、ユーティリティが網羅されています。 |
| **32** | `OBJS = $(SRC:.c=.o)` | **オブジェクトファイル変換**<br>`.c`ファイルのリストから接尾辞置換により`.o`ファイルのリストを生成します。 |
| **34** | `LIBFT = ...` | **Libftパス**<br>`libft.a`静的ライブラリのパスを定義します。 |
| **36** | `UNAME := $(shell uname)` | **OS判定**<br>シェルコマンド`uname`を実行し、現在のOS名を取得します。これによりOS依存のコンパイル設定を分岐させます。 |
| **38-48** | `ifeq ($(UNAME), Darwin) ...` | **環境依存設定**<br>**Darwin (macOS)**: `minilibx_opengl_20191021`を使用し、OpenGLとAppKitフレームワークをリンクします。<br>**Linux**: `minilibx-linux`を使用し、X11と数学ライブラリ(`-lm`)をリンクします。 |
| **50-51** | `INCLUDES = ...` | **インクルードパス**<br>ヘッダーファイルの検索パス(`-I`)を設定します。標準の`include`に加え、各サブディレクトリ(`src/core`など)も指定されているため、`#include "parse.h"`のように簡潔に記述可能です。 |
| **53** | `all: $(NAME)` | **デフォルトターゲット**<br>`make`コマンド単体で実行された場合、`$(NAME)`ターゲット（`cub3D`）をビルドします。 |
| **55-56** | `$(NAME): ...` | **リンク処理**<br>オブジェクトファイルと外部ライブラリ(`libft`, `mlx`)をリンクして実行可能ファイルを生成します。 |
| **58-62** | `$(LIBFT): ...` | **ライブラリビルド**<br>`make -C`を使用して、サブディレクトリ内のMakefileを再帰的に呼び出し、ライブラリをビルドします。 |
| **64-65** | `%.o: %.c` | **コンパイルルール**<br>各`.c`ファイルを`.o`にコンパイルします。`$(INCLUDES)`を指定してヘッダーを見つけられるようにしています。 |
| **67** | `bonus: $(NAME)` | **ボーナスターゲット**<br>現状は通常ビルドと同じですが、将来的にボーナス機能専用のビルドを区別する場合に使用されます。 |
| **69-72** | `clean:` | **中間ファイル削除**<br>オブジェクトファイルを削除し、各ライブラリの`clean`ターゲットも呼び出します。 |
| **74-76** | `fclean: clean` | **完全削除**<br>実行可能ファイル`cub3D`も削除し、各ライブラリの`fclean`も実行して初期状態に戻します。 |
| **78** | `re: fclean all` | **リビルド**<br>完全に削除してから再ビルドを行います。環境不整合時に有用です。 |
