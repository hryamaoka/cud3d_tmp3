# Makefile 詳細解説

## 概要
プロジェクトのビルドプロセスを自動化するための設定ファイルです。`make` コマンドだけでコンパイル、リンク、依存関係の解決、一時ファイルの削除などを行えるようにします。

## 依存関係
*   `libft`: 標準ライブラリの拡張関数群。
*   `minilibx` (mlx): グラフィック描画ライブラリ。OS (macOS/Linux) に応じて適切なバージョンをリンクします。

## コード行別解説

| 行番号 | コード | 詳細解説 |
| :--- | :--- | :--- |
| 13 | `NAME = cub3D` | **実行ファイル名**<br>最終的に生成される実行バイナリの名前を `cub3D` と定義しています。 |
| 14 | `CC = cc` | **コンパイラ指定**<br>使用するCコンパイラを `cc` (通常は gcc や clang) に設定します。 |
| 15 | `CFLAGS = -Wextra -Wall -Werror` | **コンパイルオプション**<br>エラー検出を厳密にするためのフラグです。`-Wall -Wextra -Werror` は42スクールの課題要件で必須です。 |
| 16 | `RM = rm -rf` | **削除コマンド**<br>ファイル削除用のコマンド定義です。 |
| 18-20 | `SRC_DIR = ./src` 等 | 各ディレクトリパスの定義。ソースコード、ヘッダー、Libftの場所を指定します。 |
| 22-30 | `SRC = src/main.c ...` | **ソースファイル一覧**<br>コンパイル対象となる全ての `.c` ファイルを列挙しています。ディレクトリごとに整理して記述されています。 |
| 32 | `OBJS = $(SRC:.c=.o)` | **オブジェクトファイル変換**<br>ソースファイル名 (`.c`) をオブジェクトファイル名 (`.o`) に置換したリストを生成します。 |
| 34 | `LIBFT = $(LIB_DIR)/libft.a` | Libftのライブラリファイルパス。 |
| 36 | `UNAME := $(shell uname)` | **OS判定**<br>実行環境のOS名を取得します（Darwin なら macOS, Linux なら Linux）。 |
| 38-48 | `ifeq ($(UNAME), Darwin) ... endif` | **OS別設定**<br>OSに応じて MiniLibX のパスとリンクフラグ (`MLX_FLAGS`) を切り替えます。Linuxの場合、X11や数学ライブラリ (`-lm`) もリンクに含めます。 |
| 50-51 | `INCLUDES = ...` | **インクルードパス**<br>ヘッダーファイルを探すディレクトリを指定します。`-I` オプションで各サブディレクトリ (`src/core`, `src/parser` 等) も含めています。 |
| 53 | `all: $(NAME)` | **デフォルトターゲット**<br>`make` とだけ打った場合に実行されるターゲットです。`$(NAME)` (cub3D) を作成します。 |
| 55 | `$(NAME): $(OBJS) $(LIBFT) $(MLX)` | **リンク実行**<br>オブジェクトファイルとライブラリが揃ったら、それらをリンクして実行ファイルを生成します。 |
| 56 | `  $(CC) $(CFLAGS) $(OBJS) ...` | 実際のコンパイル・リンクコマンド。 |
| 58-62 | `$(LIBFT):`, `$(MLX):` | **ライブラリビルド**<br>依存ライブラリのディレクトリで `make` を実行し、ライブラリファイルを生成させます。 |
| 64-65 | `%.o: %.c` | **コンパイルルール**<br>個々の `.c` ファイルを `.o` ファイルにコンパイルするルールです。 |
| 67 | `bonus: $(NAME)` | **ボーナスターゲット**<br>ボーナス機能を含むビルド。この定義では通常ビルドと同じですが、課題要件によってはファイルを切り替える場合があります。 |
| 69-72 | `clean:` | **中間ファイル削除**<br>`.o` ファイルを削除します。サブディレクトリの `make clean` も呼び出します。 |
| 74-76 | `fclean:` | **全削除**<br>`clean` に加えて、実行ファイル (`$(NAME)`) も削除します。 |
| 78 | `re: fclean all` | **再ビルド**<br>完全にクリーンな状態から再ビルドを行います。 |
| 80 | `.PHONY: ...` | **フォニーターゲット**<br>同名のファイルが存在しても、これらのコマンドが必ず実行されるように宣言します。 |
